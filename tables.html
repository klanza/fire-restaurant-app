<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tables Page</title>

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./style.css">

</head>

<body>

	<div class="container">	

		<div class="jumbotron text-center">
		  <h1 class="display-4">Hot Restaurant</h1>
			<hr class="my-4">
			<h2>Current Reservations and Waiting List</h2>
			<p class="lead">
			    <a class="btn btn-primary btn-lg" id="reserve" href="./tables.html" role="button">Make A Reservation</a>
			    <a class="btn btn-primary btn-lg" id="view" href="./home.html" role="button">Home</a>
			</p>
		</div>

		<table class="table table-hover" id="table-main">
			<header><h3>Current Reserved Tables</h3></header>
			  <thead>
			    <tr>
			      <th scope="col">#</th>
			      <th scope="col">Name</th>
			      <th scope="col">Phone Number</th>
			      <th scope="col">Email</th>
			    </tr>
			  </thead>
			  <tbody id="table-body">
			    
			  </tbody>
		</table>

		<table class="table table-hover">
			<header><h3>Current Waitlist</h3></header>
			  <thead>
			    <tr>
			      <th scope="col">#</th>
			      <th scope="col">Name</th>
			      <th scope="col">Phone Number</th>
			      <th scope="col">Email</th>
			    </tr>
			  </thead>
			  <tbody id="table-waitlist">
			    
			  </tbody>
		</table>	

	</div>

	<script type="text/javascript">

		$.get("/api/tables", function(data) {
			
			console.log(data);

			if (data) {
				var num = 0;

				for (var i = 0; i < data.length; i++) {
					var table = $("<tr><th>" + (++num) + "</th>" + 
							   "<td>" + data[i].name + "</td>" + 
							   "<td>" + data[i].phone + "</td>" +
							   "<td>" + data[i].email + "</td>" +);

					$("#table-body").append(table);	
				}
			}
			else {
				$("#table-main").text("Not available");
			}
		});

		$.get("/api/waitlist", function(data) {
			
			console.log(data);

			if (data) {
				var num = 0;

				for (var i = 0; i < data.length; i++) {
					var table = $("<tr><th>" + (++num) + "</th>" + 
							   "<td>" + data[i].name + "</td>" + 
							   "<td>" + data[i].phone + "</td>" +
							   "<td>" + data[i].email + "</td>" +);

					$("#table-waitlist").append(table);	
				}
			}
			else {
				$("#table-main").text("Not available");
			}
		});

	</script>

</body>

</html>